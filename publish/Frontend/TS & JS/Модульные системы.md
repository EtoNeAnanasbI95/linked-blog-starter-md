# ES-модули
ES-модули — это способ организации JavaScript-кода, позволяющий делить его на небольшие, управляемые части. С помощью операторов ⁠import и ⁠export разработчик может легко подключать функции, классы или переменные из одного файла в другой. Это стандартная модульная система JavaScript, введённая в ECMAScript 2015 (ES6). Она работает и в браузерах, и в Node.js (с версии 12+). Это "официальный" способ работы с модулями в современном JS.

* **Синтаксис**: Использует import для импорта и export для экспорта.
```js
// math.js
export function sum(a, b) {
  return a + b;
}

// index.js
import { sum } from './math.js';
console.log(sum(2, 3)); // 5
```

- **Как работает**:
    - Модули загружаются **асинхронно** (в браузерах) или псевдоасинхронно (в Node.js).
    - Поддерживает статический анализ: импорты и экспорты фиксированы (нельзя писать import x from someVariable).
    - Работает в браузерах нативно (с `<script type="module">`) и в Node.js (с .mjs или "type": "module" в package.json).
- **Особенности**:
    - Поддержка **динамического импорта**: import('./module.js').then(...) для ленивой загрузки.
    - Строгий синтаксис: импорты только в начале файла, экспорты — чётко определённые.
    - Отличный tree-shaking: бандлеры (Vite, Rollup) легко убирают неиспользуемый код.
    - Циклические зависимости поддерживаются, но требуют аккуратности.

Когда браузер загружает JavaScript-файл, он может автоматически загружать необходимые модули, указанные с помощью ⁠import. Это делает процесс разработки более эффективным, так как вместо создания одного большого файла, код может быть разделён на отдельные модули, которые будут загружаться по мере необходимости.

# CommonJS
**Что это?**  
CommonJS — это модульная система, созданная для Node.js, чтобы JS мог работать с модулями на сервере. Она была стандартом в Node.js до появления ES Modules.

- **Синтаксис**: Использует require() для импорта и module.exports для экспорта.
```js
// math.js 
function sum(a, b) { return a + b; } 
module.exports = { sum }; 

// index.js 
const { sum } = require('./math'); 
console.log(sum(2, 3)); // 5
```
- **Как работает**:
    - Модули загружаются **синхронно** — Node.js читает файл и выполняет его во время require().
    - Каждый модуль кэшируется: если ты дважды импортируешь один модуль, он выполнится только раз.
    - CommonJS работает в основном в Node.js, но не в браузерах (без бандлеров вроде Webpack).
- **Особенности**:
    - Динамический импорт: ты можешь писать require(someVariable) и загружать модули на основе условий.
    - Экспорт — это объект (module.exports), который можно менять в любой момент.
    - Поддержка циклических зависимостей (но с оговорками).
- **Для Go-шника**:  
    Похоже на то, как в Go ты импортируешь пакет (import "math"), но CommonJS более динамичный и "серверный". В Go зависимости статичны и проверяются на этапе компиляции, а в CommonJS всё решается во время выполнения (runtime).
- **Проблемы**:
    - Синхронная загрузка тормозит при больших проектах.
    - Не работает нативно в браузерах.
    - Tree-shaking (удаление неиспользуемого кода) сложнее, чем в ES Modules.