# Table of content
1. [[❌ CORS]]
2. [[❌ Kerberos]]
3. [[❌ LDAP]]
4. [[❌ OAuth3.0]]
5. [[❌ OIDC]]
6. [[CSRF]]
7. [[JWT]]
8. [[OAuth2.0]]
9. [[XSS]]
# Основа
* Базовые понятия при login операции (идут по порядку выполнения):
	1. Аутентификация — это проверка, **кто вы**
	2. Авторизация — это проверка, **что вам разрешено делать** после того, как система удостоверилась, кто вы
## Токены
* Вся безопастьность строится на том, что кто-то каким-то образом должен доказать, что конкретно он имеет право сделать или увидеть что-то. Например когда я авторизуюсь в свой ВК я ввожу логин и пароль с целью доказать, "йоу, это я, дайте мне написать кентам". И вот чтоб каждый раз, при отправке каждого сообщения и вообще в целом любого привелегированного действия мне не надо было вводить ебаный логин и пароль, люди придумали токены, которые позволяют использовать их как "быстрый ключ" для каких-то действий. Наглядный пример это [[JWT]]. Токены эти обычно вставляются в HTTP заголовки Authorization, и бывают разные
### Виды токенов:
#### Bearer
- **Описание:** Простой токен, который даёт доступ к ресурсу без дополнительных проверок.
- **Формат:**
    `Authorization: Bearer <токен>`
- **Пример использования:** OAuth 2.0, JWT.
- **Особенность:** Сервер просто проверяет валидность токена, сам токен несёт права (claims).
#### Basic
- **Описание:** Передача логина и пароля закодированных в Base64.
- **Формат:**
    `Authorization: Basic <base64(username:password)>`
- **Особенность:** Небезопасно без HTTPS, так как credentials легко перехватить.
#### Digest
- **Описание:** Более сложная схема, чем Basic. Сервер отправляет «nonce», клиент возвращает хэш пароля + nonce.
- **Формат:**
    `Authorization: Digest username="user", realm="example", ...`
- **Особенность:** Защищает от повторного использования (replay attack) без HTTPS, но редко используется сегодня.
# Современные паттерны для SPA 
Есть два базовых подхода:
## Вариант А. **[[JWT]] в браузере**
- Логинишься → получаешь JWT и refresh token → кладёшь в `localStorage`.
- API вызываешь с `Authorization: Bearer <jwt>`.
- Минус: можно украсть через XSS.
- Это «как ты привык».

## Вариант B. **[[BFF (Backend For Frontend)]] (рекомендуемый frontend паттерн)**
- Логинишься → токен хранится только на сервере.
- В браузере лежит HttpOnly cookie.
- API просто работает по cookie.
- Минус: чуть сложнее настроить.
- Плюс: безопаснее (не надо париться за XSS/refresh).