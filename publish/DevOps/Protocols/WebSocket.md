# –í–∫—Ä–∞—Ç—Ü–µ
**–°–∏—Ç—É–∞—Ü–∏—è –∏–∑ –∂–∏–∑–Ω–∏**:
1. –¢—ã —Å–∏–¥–∏—à—å –≤ —á–∞—Ç–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Slack –∏–ª–∏ Telegram Web).
2. –ö—Ç–æ-—Ç–æ –ø–∏—à–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Üí —Ç—ã —Å—Ä–∞–∑—É –µ–≥–æ –≤–∏–¥–∏—à—å **–±–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã**.
3. –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?
    - –í –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–º HTTP –∫–ª–∏–µ–Ω—Ç **—Å–∞–º** —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç: ¬´–≠–π, —Å–µ—Ä–≤–µ—Ä, –µ—Å—Ç—å –Ω–æ–≤–æ—Å—Ç–∏?¬ª (polling).
    - –ê —Å **WebSocket** —Å–µ—Ä–≤–µ—Ä **—Å–∞–º –º–æ–∂–µ—Ç –ø—Ä–∏—Å–ª–∞—Ç—å**: ¬´–ù–∞, –≤–æ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –¥—Ä—É–≥–∞¬ª.
üëâ WebSocket ‚Äî —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è **–ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è** –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º, –≥–¥–µ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã –º–æ–≥—É—Ç –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –¥–∞–Ω–Ω—ã–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
# –ü–æ–¥—Ä–æ–±–Ω–µ–µ
## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?
1. –ö–ª–∏–µ–Ω—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —Å–µ—Ä–≤–µ—Ä–æ–º —á–µ—Ä–µ–∑ **–æ–±—ã—á–Ω—ã–π HTTP-–∑–∞–ø—Ä–æ—Å** —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º `Upgrade: websocket`.
```
GET /chat HTTP/1.1
Host: server.com
Upgrade: websocket
Connection: Upgrade
```
1. –°–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç: ¬´–û–∫–µ–π, –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ WebSocket¬ª.
2. –¢–µ–ø–µ—Ä—å —É –∫–ª–∏–µ–Ω—Ç–∞ –∏ —Å–µ—Ä–≤–µ—Ä–∞ –µ—Å—Ç—å **–ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ** –ø–æ–≤–µ—Ä—Ö TCP.
3. –ú–æ–∂–Ω–æ –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏:
    - –ö–ª–∏–µ–Ω—Ç ‚Üí —Å–µ—Ä–≤–µ—Ä: ¬´–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–ø–∏—Å–∞–ª —Ç–µ–∫—Å—Ç¬ª.
    - –°–µ—Ä–≤–µ—Ä ‚Üí –∫–ª–∏–µ–Ω—Ç: ¬´–£ —Ç–µ–±—è –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ¬ª.
### –ü–ª—é—Å—ã:
- ‚úÖ –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è, –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫.
- ‚úÖ –≠–∫–æ–Ω–æ–º–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ (–Ω–µ –Ω–∞–¥–æ –¥–µ–ª–∞—Ç—å –∫—É—á—É –∑–∞–ø—Ä–æ—Å–æ–≤ `polling`).
- ‚úÖ –î–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ—Å—Ç—å (—Å–µ—Ä–≤–µ—Ä –º–æ–∂–µ—Ç —Å–∞–º –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ).
### –ú–∏–Ω—É—Å—ã:
- ‚ùå –°–ª–æ–∂–Ω–µ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å (–Ω–∞–¥–æ –¥–µ—Ä–∂–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è).
- ‚ùå –¢—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ –≤–Ω–∏–º–∞–Ω–∏—è –∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, —Ç–∞–π–º–∞—É—Ç—ã, –∑–∞—â–∏—Ç–∞ –æ—Ç DoS).
- ‚ùå –ù–µ –≤—Å–µ–≥–¥–∞ –Ω—É–∂–µ–Ω: –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ —Å–∞–π—Ç–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ REST/HTTP.
## –ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç HTTP?
- [[HTTP]] = –∑–∞–ø—Ä–æ—Å‚Äì–æ—Ç–≤–µ—Ç, –≤—Å–µ–≥–¥–∞ –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –∫–ª–∏–µ–Ω—Ç.
- WebSocket = –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, **–æ–±–∞** –º–æ–≥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–æ–≥–¥–∞ —É–≥–æ–¥–Ω–æ.
- –í HTTP –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —á–∞—â–µ –≤—Å–µ–≥–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –≤ WebSocket –æ–Ω–æ –∂–∏–≤—ë—Ç –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ —Ç—ã —Å–∞–º –Ω–µ –∑–∞–∫—Ä–æ–µ—à—å.
## –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
- –ß–∞—Ç—ã (Telegram Web, Slack, WhatsApp Web).
- –û–Ω–ª–∞–π–Ω-–∏–≥—Ä—ã.
- –¢–æ—Ä–≥–æ–≤—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (–±–∏—Ä–∂–∞, –≥–¥–µ –∫—É—Ä—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ).
- –°–æ–≤–º–µ—Å—Ç–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (Google Docs).
## –ö–æ–¥-–ø—Ä–∏–º–µ—Ä:
**–ö–ª–∏–µ–Ω—Ç (JS –≤ –±—Ä–∞—É–∑–µ—Ä–µ):**
```js
const socket = new WebSocket("wss://server.com/chat");

socket.onopen = () => {
  console.log("Connected");
  socket.send("–ü—Ä–∏–≤–µ—Ç, —Å–µ—Ä–≤–µ—Ä!");
};

socket.onmessage = (event) => {
  console.log("–ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:", event.data);
};

```
**–°–µ—Ä–≤–µ—Ä (Node.js + ws):**
```js
import { WebSocketServer } from "ws";

const wss = new WebSocketServer({ port: 8080 });

wss.on("connection", (ws) => {
  ws.on("message", (msg) => {
    console.log("–ö–ª–∏–µ–Ω—Ç —Å–∫–∞–∑–∞–ª:", msg);
    ws.send("–ü—Ä–∏–Ω—è—Ç–æ: " + msg);
  });
});
```
## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:
* [[HTTP#long polling]]
* [[‚ùå SSE]]